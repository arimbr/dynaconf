<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Dynaconf by rochacbruno</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Dynaconf</h1>
        <h2>Dynamic config load for Python </h2>
        <a href="https://github.com/rochacbruno/dynaconf" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <p><img src="https://raw.githubusercontent.com/rochacbruno/dynaconf/master/dynaconf_joystick.png" align="left" width="192px" height="192px">
<img align="left" width="0" height="192px" hspace="10"></p>

<blockquote>
<p><strong>dynaconf</strong> - The <strong>dyna</strong>mic <strong>conf</strong>igurator for your Python Project </p>
</blockquote>

<p><a href="/LICENSE"><img src="https://img.shields.io/badge/license-MIT-007EC7.svg?style=flat-square" alt="MIT License"></a> <a href="https://pypi.python.org/pypi/dynaconf"><img src="https://img.shields.io/pypi/v/dynaconf.svg" alt="PyPI"></a> <a href="https://pypi.python.org/pypi/dynaconf"><img src="https://img.shields.io/pypi/dw/dynaconf.svg" alt="downloads"></a> <a href="https://travis-ci.org/rochacbruno/dynaconf"><img src="http://img.shields.io/travis/rochacbruno/dynaconf.svg" alt="Travis CI"></a> <a href="https://coveralls.io/github/rochacbruno/dynaconf?branch=master"><img src="https://coveralls.io/repos/rochacbruno/dynaconf/badge.svg?branch=master&amp;service=github" alt="Coverage Status"></a> <a href="https://landscape.io/github/rochacbruno/dynaconf/master"><img src="https://landscape.io/github/rochacbruno/dynaconf/master/landscape.svg?style=flat" alt="Code Health"></a></p>

<p><strong>dynaconf</strong> is an OSM (<strong>O</strong>bject <strong>S</strong>ettings <strong>M</strong>apper) it can read settings variables from a set of different data stores such as <strong>python settings files</strong>, <strong>environment variables</strong>, <strong>redis</strong>, <strong>memcached</strong>, <strong>ini files</strong>, <strong>json files</strong>, <strong>yaml files</strong> and you can customize <strong>dynaconf</strong> loaders to read from wherever you want. (maybe you really want to read from xml files ughh?)</p>

<p><br><br></p>

<h1>
<a id="install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h1>

<div class="highlight highlight-source-shell"><pre>pip install dynaconf</pre></div>

<h1>
<a id="define-your-settings-module" class="anchor" href="#define-your-settings-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>define your settings module</h1>

<div class="highlight highlight-source-shell"><pre><span class="pl-k">export</span> DYNACONF_SETTINGS=myproject.settings
or
<span class="pl-k">export</span> DYNACONF_SETTINGS=myproject.production_settings
or
<span class="pl-k">export</span> DYNACONF_SETTINGS=/etc/myprogram/settings.py</pre></div>

<h1>
<a id="you-can-export-extra-values" class="anchor" href="#you-can-export-extra-values" aria-hidden="true"><span class="octicon octicon-link"></span></a>you can export extra values</h1>

<div class="highlight highlight-source-shell"><pre><span class="pl-k">export</span> DYNACONF_DATABASE=<span class="pl-s"><span class="pl-pds">'</span>mysql://....<span class="pl-pds">'</span></span>
<span class="pl-k">export</span> DYNACONF_SYSTEM_USER=<span class="pl-s"><span class="pl-pds">'</span>admin<span class="pl-pds">'</span></span>
<span class="pl-k">export</span> DYNACONF_FOO=<span class="pl-s"><span class="pl-pds">'</span>bar<span class="pl-pds">'</span></span></pre></div>

<p>Or define all your settings as env_vars starting with <strong>DYNACONF_</strong></p>

<h1>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h1>

<div class="highlight highlight-source-shell"><pre><span class="pl-k">export</span> DYNACONF_SETTINGS=myproject.settings</pre></div>

<h3>
<a id="file-myprojectsettingspy" class="anchor" href="#file-myprojectsettingspy" aria-hidden="true"><span class="octicon octicon-link"></span></a>file: myproject/settings.py</h3>

<div class="highlight highlight-source-python"><pre>NAME <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Bruno<span class="pl-pds">'</span></span></pre></div>

<h3>
<a id="fileapppy" class="anchor" href="#fileapppy" aria-hidden="true"><span class="octicon octicon-link"></span></a>file:app.py</h3>

<div class="highlight highlight-source-python"><pre>
<span class="pl-k">from</span> dynaconf <span class="pl-k">import</span> settings

<span class="pl-k">print</span> settings.NAME
<span class="pl-k">print</span> settings.DATABASE
<span class="pl-k">print</span> settings.SYSTEM_USER
<span class="pl-k">print</span> settings.get(<span class="pl-s"><span class="pl-pds">'</span>FOO<span class="pl-pds">'</span></span>)</pre></div>

<h3>
<a id="then" class="anchor" href="#then" aria-hidden="true"><span class="octicon octicon-link"></span></a>then</h3>

<div class="highlight highlight-source-shell"><pre>python app.py

Bruno
mysql://..
admin
bar</pre></div>

<h1>
<a id="namespace-support" class="anchor" href="#namespace-support" aria-hidden="true"><span class="octicon octicon-link"></span></a>Namespace support</h1>

<p>When you are working with multiple projects using the same environment maybe you want to use different namespaces for ENV vars based configs</p>

<div class="highlight highlight-source-shell"><pre><span class="pl-k">export</span> DYNACONF_DATABASE=<span class="pl-s"><span class="pl-pds">"</span>DYNADB<span class="pl-pds">"</span></span>
<span class="pl-k">export</span> PROJ1_DATABASE=<span class="pl-s"><span class="pl-pds">"</span>PROJ1DB<span class="pl-pds">"</span></span>
<span class="pl-k">export</span> PROJ2_DATABASE=<span class="pl-s"><span class="pl-pds">"</span>PROJ2DB<span class="pl-pds">"</span></span></pre></div>

<p>and then access them</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> dynaconf <span class="pl-k">import</span> settings

<span class="pl-c"># configure() or configure('settingsmodule.path') is needed</span>
<span class="pl-c"># only when DYNACONF_SETINGS is not defined</span>
settings.configure()

<span class="pl-c"># access default namespace settings</span>
settings.DATABASE
<span class="pl-s"><span class="pl-pds">'</span>DYNADB<span class="pl-pds">'</span></span>

<span class="pl-c"># switch namespaces</span>
settings.namespace(<span class="pl-s"><span class="pl-pds">'</span>PROJ1<span class="pl-pds">'</span></span>)
settings.DATABASE
<span class="pl-s"><span class="pl-pds">'</span>PROJ1DB<span class="pl-pds">'</span></span>

settings.namespace(<span class="pl-s"><span class="pl-pds">'</span>PROJ2<span class="pl-pds">'</span></span>)
settings.DATABASE
<span class="pl-s"><span class="pl-pds">'</span>PROJ2DB<span class="pl-pds">'</span></span>

<span class="pl-c"># return to default, call it without args</span>
settings.namespace()
settings.DATABASE
<span class="pl-s"><span class="pl-pds">'</span>DYNADB<span class="pl-pds">'</span></span></pre></div>

<p>You can also use the context manager:</p>

<div class="highlight highlight-source-python"><pre>settings.DATABASE
<span class="pl-s"><span class="pl-pds">'</span>DYNADB<span class="pl-pds">'</span></span>

<span class="pl-k">with</span> settings.using_namespace(<span class="pl-s"><span class="pl-pds">'</span>PROJ1<span class="pl-pds">'</span></span>):
    settings.DATABASE
    <span class="pl-s"><span class="pl-pds">'</span>PROJ1DB<span class="pl-pds">'</span></span>

<span class="pl-k">with</span> settings.using_namespace(<span class="pl-s"><span class="pl-pds">'</span>PROJ2<span class="pl-pds">'</span></span>):
    settings.DATABASE
    <span class="pl-s"><span class="pl-pds">'</span>PROJ2DB<span class="pl-pds">'</span></span>

settings.DATABASE
<span class="pl-s"><span class="pl-pds">'</span>DYNADB<span class="pl-pds">'</span></span></pre></div>

<blockquote>
<p>namespace() and using_namespace() takes optional argument <strong>clean</strong> defaults to True. If you want to keep the pre-loaded values when switching namespaces set it to False.</p>
</blockquote>

<h1>
<a id="casting-values-from-envvars" class="anchor" href="#casting-values-from-envvars" aria-hidden="true"><span class="octicon octicon-link"></span></a>casting values from envvars</h1>

<p>Sometimes you need to set some values as specific types, boolean, integer, float or lists and dicts.</p>

<p>built in casts</p>

<ul>
<li>
<a href="https://github.com/int" class="user-mention">@int</a> (as_int)</li>
<li>
<a href="https://github.com/bool" class="user-mention">@bool</a> (as_bool)</li>
<li>
<a href="https://github.com/float" class="user-mention">@float</a> (as_float)</li>
<li>
<a href="https://github.com/json" class="user-mention">@json</a> (as_json)</li>
</ul>

<blockquote>
<p><a href="https://github.com/json" class="user-mention">@json</a> / as_json  will use json to load a Python object from string, it is useful to get lists and dictionaries. The return is always a Python object.</p>
</blockquote>

<p>strings does not need converters.</p>

<p>You have 2 ways to use the casts.</p>

<h3>
<a id="casting-on-declaration" class="anchor" href="#casting-on-declaration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Casting on declaration</h3>

<p>Just start your ENV settigs with this</p>

<div class="highlight highlight-source-shell"><pre><span class="pl-k">export</span> DYNACONF_DEFAULT_THEME=<span class="pl-s"><span class="pl-pds">'</span>material<span class="pl-pds">'</span></span>
<span class="pl-k">export</span> DYNACONF_DEBUG=<span class="pl-s"><span class="pl-pds">'</span>@bool True<span class="pl-pds">'</span></span>
<span class="pl-k">export</span> DYNACONF_DEBUG_TOOLBAR_ENABLED=<span class="pl-s"><span class="pl-pds">'</span>@bool False<span class="pl-pds">'</span></span>
<span class="pl-k">export</span> DYNACONF_PAGINATION_PER_PAGE=<span class="pl-s"><span class="pl-pds">'</span>@int 20<span class="pl-pds">'</span></span>
<span class="pl-k">export</span> DYNACONF_MONGODB_SETTINGS=<span class="pl-s"><span class="pl-pds">'</span>@json {"DB": "quokka_db"}<span class="pl-pds">'</span></span>
<span class="pl-k">export</span> DYNACONF_ALLOWED_EXTENSIONS=<span class="pl-s"><span class="pl-pds">'</span>@json ["jpg", "png"]<span class="pl-pds">'</span></span></pre></div>

<p>Starting the settings values with @ will make dynaconf.settings to cast it in the time od load.</p>

<h3>
<a id="casting-on-access" class="anchor" href="#casting-on-access" aria-hidden="true"><span class="octicon octicon-link"></span></a>Casting on access</h3>

<div class="highlight highlight-source-shell"><pre><span class="pl-k">export</span> DYNACONF_USE_SSH=<span class="pl-s"><span class="pl-pds">'</span>yes<span class="pl-pds">'</span></span>

from dynaconf import settings
</pre></div>

<div class="highlight highlight-source-python"><pre>
use_ssh <span class="pl-k">=</span> settings.get(<span class="pl-s"><span class="pl-pds">'</span>USE_SSH<span class="pl-pds">'</span></span>, <span class="pl-smi">cast</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>@bool<span class="pl-pds">'</span></span>)
<span class="pl-c"># or</span>
use_ssh <span class="pl-k">=</span> settings(<span class="pl-s"><span class="pl-pds">'</span>USE_SSH<span class="pl-pds">'</span></span>, <span class="pl-smi">cast</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>@bool<span class="pl-pds">'</span></span>)
<span class="pl-c"># or</span>
use_ssh <span class="pl-k">=</span> settings.as_bool(<span class="pl-s"><span class="pl-pds">'</span>USE_SSH<span class="pl-pds">'</span></span>)

<span class="pl-k">print</span> use_ssh

<span class="pl-c1">True</span></pre></div>

<h3>
<a id="more-examples" class="anchor" href="#more-examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>more examples</h3>

<div class="highlight highlight-source-shell"><pre><span class="pl-k">export</span> DYNACONF_USE_SSH=<span class="pl-s"><span class="pl-pds">'</span>enabled<span class="pl-pds">'</span></span>

<span class="pl-k">export</span> DYNACONF_ALIST=<span class="pl-s"><span class="pl-pds">'</span>@json [1,2,3]<span class="pl-pds">'</span></span>
<span class="pl-k">export</span> DYNACONF_ADICT=<span class="pl-s"><span class="pl-pds">'</span>@json {"name": "Bruno"}<span class="pl-pds">'</span></span>
<span class="pl-k">export</span> DYNACONF_AINT=<span class="pl-s"><span class="pl-pds">'</span>@int 42<span class="pl-pds">'</span></span>
<span class="pl-k">export</span> DYNACONF_ABOOL=<span class="pl-s"><span class="pl-pds">'</span>@bool on<span class="pl-pds">'</span></span>
<span class="pl-k">export</span> DYNACONF_AFLOAT=<span class="pl-s"><span class="pl-pds">'</span>@float 42.5<span class="pl-pds">'</span></span></pre></div>

<div class="highlight highlight-source-python"><pre>
<span class="pl-k">from</span> dynaconf <span class="pl-k">import</span> settings
settings.configure()

<span class="pl-c"># original value</span>
settings(<span class="pl-s"><span class="pl-pds">'</span>USE_SSH<span class="pl-pds">'</span></span>)
<span class="pl-s"><span class="pl-pds">'</span>enabled<span class="pl-pds">'</span></span>

<span class="pl-c"># cast as bool</span>
settings(<span class="pl-s"><span class="pl-pds">'</span>USE_SSH<span class="pl-pds">'</span></span>, <span class="pl-smi">cast</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>@bool<span class="pl-pds">'</span></span>)
<span class="pl-c1">True</span>

<span class="pl-c"># also cast as bool</span>
settings.as_bool(<span class="pl-s"><span class="pl-pds">'</span>USE_SSH<span class="pl-pds">'</span></span>)
<span class="pl-c1">True</span>

<span class="pl-c"># cast defined in declaration '@bool on'</span>
settings.ABOOL
<span class="pl-c1">True</span>

<span class="pl-c"># cast defined in declaration '@json {"name": "Bruno"}'</span>
settings.ADICT
{<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>Bruno<span class="pl-pds">'</span></span>}

<span class="pl-c"># cast defined in declaration '@json [1,2,3]'</span>
settings.ALIST
[<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>]

<span class="pl-c"># cast defined in decalration '@float 42.5'</span>
settings.AFLOAT
<span class="pl-c1">42.5</span>

<span class="pl-c"># cast defined in declaration '@int 42'</span>
settings.AINT
<span class="pl-c1">42</span>
</pre></div>

<h1>
<a id="defining-default-namespace" class="anchor" href="#defining-default-namespace" aria-hidden="true"><span class="octicon octicon-link"></span></a>Defining default namespace</h1>

<p>Include in the file defined in DYNACONF_SETTINGS the desired namespace</p>

<div class="highlight highlight-source-python"><pre>DYNACONF_NAMESPACE <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>DYNACONF<span class="pl-pds">'</span></span></pre></div>

<h1>
<a id="storing-settings-in-databases" class="anchor" href="#storing-settings-in-databases" aria-hidden="true"><span class="octicon octicon-link"></span></a>Storing settings in databases</h1>

<h2>
<a id="using-redis" class="anchor" href="#using-redis" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using REDIS</h2>

<p>Redis support relies on the following two settings that you can setup in the DYNACONF_SETTINGS file</p>

<p>1  Add the configuration for redis client</p>

<div class="highlight highlight-source-python"><pre>REDIS_FOR_DYNACONF <span class="pl-k">=</span> {
    <span class="pl-s"><span class="pl-pds">'</span>host<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>localhost<span class="pl-pds">'</span></span>,
    <span class="pl-s"><span class="pl-pds">'</span>port<span class="pl-pds">'</span></span>: <span class="pl-c1">6379</span>,
    <span class="pl-s"><span class="pl-pds">'</span>db<span class="pl-pds">'</span></span>: <span class="pl-c1">0</span>
}
</pre></div>

<p>Include <strong>redis_loader</strong> in dynaconf LOADERS_FOR_DYNACONF</p>

<blockquote>
<p>the order is the precedence</p>
</blockquote>

<div class="highlight highlight-source-python"><pre>
<span class="pl-c"># Loaders to read namespace based vars from diferent data stores</span>
LOADERS_FOR_DYNACONF <span class="pl-k">=</span> [
    <span class="pl-s"><span class="pl-pds">'</span>dynaconf.loaders.env_loader<span class="pl-pds">'</span></span>,
    <span class="pl-s"><span class="pl-pds">'</span>dynaconf.loaders.redis_loader<span class="pl-pds">'</span></span>
]</pre></div>

<p>You can now write variables direct in to a redis hash named <code>DYNACONF_&lt; NAMESPACE &gt;</code></p>

<p>By default <strong>DYNACONF_DYNACONF</strong></p>

<p>You can also use the redis writer</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> dynaconf.utils <span class="pl-k">import</span> redis_writer
<span class="pl-k">from</span> dynaconf <span class="pl-k">import</span> settings

redis_writer.write(settings, <span class="pl-smi">name</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>Bruno<span class="pl-pds">'</span></span>, <span class="pl-smi">database</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>localhost<span class="pl-pds">'</span></span>, <span class="pl-smi">PORT</span><span class="pl-k">=</span><span class="pl-c1">1234</span>)
</pre></div>

<p>The above data will be converted to namespaced values and recorded in redis as a hash:</p>

<pre><code>DYNACONF_DYNACONF:
    NAME='Bruno'
    DATABASE='localhost'
    PORT='@int 1234'
</code></pre>

<blockquote>
<p>if you want to skip type casting, write as string intead of PORT=1234 use PORT='1234' as redis stores everything as string anyway</p>
</blockquote>

<p>Data is read from redis and another loaders only once or when namespace() and using_namespace() are invoked. You can access the fresh value using <strong>settings.get_fresh(key)</strong></p>

<p>There is also the <strong>fresh</strong> context manager</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> dynaconf <span class="pl-k">import</span> settings

<span class="pl-k">print</span> settings.FOO  <span class="pl-c"># this data was loaded once on import</span>

<span class="pl-k">with</span> settings.fresh():
    <span class="pl-k">print</span> settings.FOO  <span class="pl-c"># this data is being directly read from loaders</span>
</pre></div>

<p>And you can also force some variables to be <strong>fresh</strong> setting in your setting file</p>

<div class="highlight highlight-source-python"><pre>DYNACONF_ALWAYS_FRESH_VARS <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>MYSQL_HOST<span class="pl-pds">'</span></span>]</pre></div>

<p>or using env vars</p>

<div class="highlight highlight-source-shell"><pre><span class="pl-k">export</span> DYNACONF_ALWAYS_FRESH_VARS=<span class="pl-s"><span class="pl-pds">'</span>@json ["MYSQL_HOST"]<span class="pl-pds">'</span></span></pre></div>

<p>Then</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> dynaconf <span class="pl-k">import</span> settings

<span class="pl-k">print</span> settings.FOO  <span class="pl-c"># This data was loaded once on import</span>

<span class="pl-k">print</span> settings.MYSQL_HOST <span class="pl-c"># This data is being read from redis imediatelly!</span>
</pre></div>

<h1>
<a id="using-programatically" class="anchor" href="#using-programatically" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using programatically</h1>

<p>Sometimes you want to override settings for your existing Package or Framework
lets say you have a <strong>conf</strong> module exposing a <strong>settings</strong> object and used to do:</p>

<p><code>from myprogram.conf import settings</code></p>

<p>Now you want to use Dynaconf, open that <code>conf.py</code> or <code>conf/__init__.py</code> and do:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c"># coding: utf-8</span>
<span class="pl-k">from</span> dynaconf <span class="pl-k">import</span> LazySettings

settings <span class="pl-k">=</span> LazySettings(
    <span class="pl-smi">ENVVAR_FOR_DYNACONF</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>MYPROGRAM_SETTINGS_MODULE<span class="pl-pds">"</span></span>,
    <span class="pl-smi">DYNACONF_NAMESPACE</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>MYPROGRAM<span class="pl-pds">'</span></span>
)
</pre></div>

<p>Now you can import settings from your own program and dynaconf will do the rest!</p>

<blockquote>
<p>This was inspired by flask.config and django.conf.settings</p>
</blockquote>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/rochacbruno/dynaconf/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/rochacbruno/dynaconf/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/rochacbruno/dynaconf"></a> is maintained by <a href="https://github.com/rochacbruno">rochacbruno</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
